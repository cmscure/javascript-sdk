{"version":3,"file":"cmscure.esm.js","sources":["../src/cmscure.js"],"sourcesContent":["/**\n * CMSCure JavaScript SDK\n * Official SDK for integrating CMSCure content management into web applications\n * \n * @version 1.0.0\n * @author CMSCure Team\n * @license MIT\n */\n\nclass CMSCureSDK extends EventTarget {\n  static #instance;\n\n  #config = null;\n  #authToken = null;\n  #cache = {};\n  #dataStoreCache = {};\n  #availableLanguages = ['en'];\n  #currentLanguage = 'en';\n  #isInitialized = false;\n  #serverUrl = 'https://app.cmscure.com';\n\n  constructor() {\n    super();\n    // Enforce singleton pattern to prevent multiple instances.\n    if (CMSCureSDK.#instance) {\n      console.log('[CMSCureSDK] Returning existing singleton instance.');\n      return CMSCureSDK.#instance;\n    }\n    CMSCureSDK.#instance = this;\n    console.log('[CMSCureSDK] Singleton instance created.');\n    this.#loadStateFromStorage();\n  }\n\n  /**\n     * Configures the SDK with project credentials and initializes authentication\n     * @param {object} config - Configuration object\n     * @param {string} config.projectId - Your project's unique ID\n     * @param {string} config.apiKey - Your project's API key\n     * @param {string} [config.defaultLanguage] - Optional default language\n     * @returns {Promise<void>}\n     */\n  async configure(config) {\n    if (this.#isInitialized) {\n      console.warn('[CMSCureSDK] SDK already configured.');\n      return;\n    }\n        \n    if (!config.projectId || !config.apiKey) {\n      console.error('[CMSCureSDK] Configuration failed: Project ID and API Key are required.');\n      return;\n    }\n        \n    this.#config = config;\n    this.#currentLanguage = config.defaultLanguage || this.#currentLanguage;\n        \n    console.log('[CMSCureSDK] Configuration set.');\n        \n    // Perform the initial sync\n    await this.#authenticateAndSync();\n    this.#isInitialized = true;\n  }\n\n  /**\n     * Gets the current language\n     * @returns {string} Current language code\n     */\n  getLanguage() {\n    return this.#currentLanguage;\n  }\n\n  /**\n     * Sets the current language and updates the UI\n     * @param {string} language - Language code to set\n     */\n  setLanguage(language) {\n    if (this.#availableLanguages.includes(language)) {\n      this.#currentLanguage = language;\n      localStorage.setItem('cmscure_current_language', language);\n      this.dispatchEvent(new CustomEvent('languageChanged', { detail: { language } }));\n      this.dispatchEvent(new CustomEvent('contentUpdated', { detail: { reason: 'LanguageChanged' } }));\n      console.log(`[CMSCureSDK] Language changed to: ${language}`);\n    } else {\n      console.warn(`[CMSCureSDK] Language '${language}' is not available.`);\n    }\n  }\n\n  /**\n     * Gets available languages\n     * @returns {string[]} Array of available language codes\n     */\n  getAvailableLanguages() {\n    return [...this.#availableLanguages];\n  }\n\n  /**\n     * Gets a translation for a specific key and tab\n     * @param {string} key - Translation key\n     * @param {string} tab - Tab name\n     * @returns {string} Translated text or fallback\n     */\n  translation(key, tab) {\n    const value = this.#cache[tab]?.[key]?.[this.#currentLanguage];\n    return value || `[${tab}:${key}]`;\n  }\n\n  /**\n     * Gets an image URL for a given key\n     * @param {string} key - Image key\n     * @returns {string|null} Image URL or null if not found\n     */\n  image(key) {\n    return this.#cache['__images__']?.[key]?.['url'] || null;\n  }\n\n  /**\n     * Gets a color value for a given key\n     * @param {string} key - Color key\n     * @returns {string|null} Color hex value or null if not found\n     */\n  color(key) {\n    return this.#cache['__colors__']?.[key]?.['hex'] || null;\n  }\n\n  /**\n     * Gets data store items by API identifier\n     * @param {string} apiIdentifier - Data store API identifier\n     * @returns {Array} Array of data store items\n     */\n  dataStore(apiIdentifier) {\n    return this.#dataStoreCache[apiIdentifier] || [];\n  }\n\n  // --- Private Methods ---\n\n  /**\n     * Loads cached state from localStorage\n     * @private\n     */\n  #loadStateFromStorage() {\n    try {\n      const token = localStorage.getItem('cmscure_auth_token');\n      const languages = localStorage.getItem('cmscure_available_languages');\n      const currentLang = localStorage.getItem('cmscure_current_language');\n      const cache = localStorage.getItem('cmscure_cache');\n      const dataStoreCache = localStorage.getItem('cmscure_datastore_cache');\n\n      if (token) this.#authToken = token;\n      if (languages) this.#availableLanguages = JSON.parse(languages);\n      if (currentLang) this.#currentLanguage = currentLang;\n      if (cache) this.#cache = JSON.parse(cache);\n      if (dataStoreCache) this.#dataStoreCache = JSON.parse(dataStoreCache);\n\n      console.log('[CMSCureSDK] Loaded state. Current language:', this.#currentLanguage);\n    } catch (error) {\n      console.error('[CMSCureSDK] Failed to load state from localStorage:', error);\n    }\n  }\n\n  /**\n     * Saves cache to localStorage\n     * @private\n     */\n  #saveCacheToStorage() {\n    try {\n      localStorage.setItem('cmscure_cache', JSON.stringify(this.#cache));\n      localStorage.setItem('cmscure_datastore_cache', JSON.stringify(this.#dataStoreCache));\n    } catch (error) {\n      console.error('[CMSCureSDK] Failed to save cache to localStorage:', error);\n    }\n  }\n\n  /**\n     * Authenticates with the server and syncs all content\n     * @private\n     */\n  async #authenticateAndSync() {\n    if (!this.#config) {\n      console.error('[CMSCureSDK] Configuration not set. Call configure() first.');\n      return;\n    }\n\n    try {\n      console.log('[CMSCureSDK] Authenticating...');\n            \n      const response = await fetch(`${this.#serverUrl}/api/sdk/auth`, {\n        method: 'POST',\n        headers: { 'Content-Type': 'application/json' },\n        body: JSON.stringify({\n          projectId: this.#config.projectId,\n          apiKey: this.#config.apiKey\n        })\n      });\n\n      if (!response.ok) {\n        throw new Error(`Authentication failed: ${response.status}`);\n      }\n\n      const data = await response.json();\n            \n      if (!data.success) {\n        throw new Error('Authentication failed');\n      }\n\n      this.#authToken = data.token;\n      this.#availableLanguages = data.availableLanguages || ['en'];\n\n      // Save to localStorage\n      localStorage.setItem('cmscure_auth_token', this.#authToken);\n      localStorage.setItem('cmscure_available_languages', JSON.stringify(this.#availableLanguages));\n\n      console.log('[CMSCureSDK] Authentication successful. Available languages:', this.#availableLanguages);\n      console.log('[CMSCureSDK] Syncing all content...');\n\n      // Create a list of all sync operations to run in parallel\n      const syncPromises = [\n        ...data.tabs.map(tab => this.#syncTab(tab)),\n        ...data.stores.map(store => this.#syncStore(store)),\n        this.#syncColors(),\n        this.#syncImages(),\n      ];\n\n      // Wait for all syncs to complete\n      await Promise.all(syncPromises);\n\n      // After all data is fetched and the cache is updated, save it once\n      this.#saveCacheToStorage();\n            \n      // Dispatch a final event indicating the initial sync is complete\n      this.dispatchEvent(new CustomEvent('contentUpdated', { detail: { reason: 'InitialSyncComplete' } }));\n      console.log('[CMSCureSDK] Initial sync complete.');\n\n    } catch (error) {\n      console.error('[CMSCureSDK] Authentication or initial sync failed:', error);\n    }\n  }\n\n  /**\n     * Syncs translations for a specific tab\n     * @private\n     */\n  async #syncTab(tab) {\n    try {\n      const response = await fetch(`${this.#serverUrl}/api/sdk/translations/${this.#config.projectId}/${tab}`, {\n        method: 'POST',\n        headers: { \n          'Authorization': `Bearer ${this.#authToken}`,\n          'Content-Type': 'application/json'\n        },\n        body: JSON.stringify({\n          projectId: this.#config.projectId,\n          tabName: tab\n        })\n      });\n            \n      if (response.status === 404) return; // No content for this tab, not an error\n      if (!response.ok) throw new Error(`HTTP error ${response.status}`);\n            \n      const data = await response.json();\n      const keyMap = {};\n      (data.keys || []).forEach(item => { keyMap[item.key] = item.values; });\n            \n      this.#cache[tab] = keyMap;\n      console.log(`[CMSCureSDK] Synced tab: ${tab}`);\n    } catch (error) {\n      console.error(`[CMSCureSDK] Failed to sync tab '${tab}':`, error);\n    }\n  }\n    \n  /**\n     * Syncs images from the server\n     * @private\n     */\n  async #syncImages() {\n    try {\n      const response = await fetch(`${this.#serverUrl}/api/sdk/images/${this.#config.projectId}`, {\n        method: 'POST',\n        headers: { \n          'Authorization': `Bearer ${this.#authToken}`,\n          'Content-Type': 'application/json'\n        },\n        body: JSON.stringify({\n          projectId: this.#config.projectId\n        })\n      });\n            \n      if (response.status === 404) return; // No images, not an error\n      if (!response.ok) throw new Error(`HTTP error ${response.status}`);\n            \n      const data = await response.json();\n      const imageMap = {};\n      (data || []).forEach(item => { imageMap[item.key] = { url: item.url }; });\n            \n      this.#cache['__images__'] = imageMap;\n      console.log('[CMSCureSDK] Synced images.');\n    } catch (error) {\n      console.error('[CMSCureSDK] Failed to sync images:', error);\n    }\n  }\n\n  /**\n     * Syncs colors from the server\n     * @private\n     */\n  async #syncColors() {\n    try {\n      const response = await fetch(`${this.#serverUrl}/api/sdk/colors/${this.#config.projectId}`, {\n        method: 'POST',\n        headers: { \n          'Authorization': `Bearer ${this.#authToken}`,\n          'Content-Type': 'application/json'\n        },\n        body: JSON.stringify({\n          projectId: this.#config.projectId\n        })\n      });\n            \n      if (response.status === 404) return; // No colors, not an error\n      if (!response.ok) throw new Error(`HTTP error ${response.status}`);\n            \n      const data = await response.json();\n      const colorMap = {};\n      (data || []).forEach(item => { colorMap[item.key] = { hex: item.value }; });\n            \n      this.#cache['__colors__'] = colorMap;\n      console.log('[CMSCureSDK] Synced colors.');\n    } catch (error) {\n      console.error('[CMSCureSDK] Failed to sync colors:', error);\n    }\n  }\n    \n  /**\n     * Syncs data store by API identifier\n     * @private\n     */\n  async #syncStore(apiIdentifier) {\n    try {\n      const response = await fetch(`${this.#serverUrl}/api/sdk/store/${this.#config.projectId}/${apiIdentifier}`, {\n        method: 'POST',\n        headers: { \n          'Authorization': `Bearer ${this.#authToken}`,\n          'Content-Type': 'application/json'\n        },\n        body: JSON.stringify({\n          projectId: this.#config.projectId,\n          apiIdentifier: apiIdentifier\n        })\n      });\n            \n      if (response.status === 404) return; // No content, not an error\n      if (!response.ok) throw new Error(`HTTP error ${response.status}`);\n\n      const data = await response.json();\n      this.#dataStoreCache[apiIdentifier] = data.items || [];\n      console.log(`[CMSCureSDK] Synced data store: ${apiIdentifier}`);\n    } catch (error) {\n      console.error(`[CMSCureSDK] Failed to sync data store '${apiIdentifier}':`, error);\n    }\n  }\n}\n\n// For ES module environments\nif (typeof module !== 'undefined' && module.exports) {\n  module.exports = CMSCureSDK;\n}\n\n// For AMD/RequireJS environments\nif (typeof define === 'function' && define.amd) {\n  define([], function() {\n    return CMSCureSDK;\n  });\n}\n\n// For browser environments (UMD)\nif (typeof window !== 'undefined') {\n  window.CMSCureSDK = CMSCureSDK;\n}\n"],"names":[],"mappings":"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"}