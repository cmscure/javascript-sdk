{"version":3,"file":"cmscure.umd.js","sources":["../src/cmscure.js"],"sourcesContent":["/**\n * CMSCure JavaScript SDK\n * Official SDK for integrating CMSCure content management into web applications\n * \n * @version 1.2.6\n * @author CMSCure Team\n * @license MIT\n */\n\nclass CMSCureSDK extends EventTarget {\n  static #instance;\n\n  #config = null;\n  #authToken = null;\n  #cache = {};\n  #dataStoreCache = {};\n  #availableLanguages = ['en'];\n  #currentLanguage = 'en';\n  #isInitialized = false;\n  #serverUrl = 'https://gateway.cmscure.com';\n\n  constructor() {\n    super();\n    // Enforce singleton pattern to prevent multiple instances.\n    if (CMSCureSDK.#instance) {\n      console.log('[CMSCureSDK] Returning existing singleton instance.');\n      return CMSCureSDK.#instance;\n    }\n    CMSCureSDK.#instance = this;\n    console.log('[CMSCureSDK] Singleton instance created.');\n    this.#loadStateFromStorage();\n  }\n\n  /**\n   * Configures the SDK with project credentials and initializes authentication\n   * @param {Object} config - Configuration object\n   * @param {string} config.projectId - Your project ID from CMSCure Dashboard\n   * @param {string} config.apiKey - Your API key from CMSCure Dashboard\n   * @param {string} [config.defaultLanguage='en'] - Default language code\n   * @returns {Promise<void>}\n   */\n  async configure(config) {\n    if (this.#isInitialized) {\n      console.warn('[CMSCureSDK] SDK already configured.');\n      return;\n    }\n        \n    if (!config.projectId || !config.apiKey) {\n      console.error('[CMSCureSDK] Configuration failed: Project ID and API Key are required.');\n      return;\n    }\n        \n    this.#config = config;\n    this.#currentLanguage = config.defaultLanguage || this.#currentLanguage;\n        \n    console.log('[CMSCureSDK] Configuration set.');\n        \n    // Perform the initial sync\n    await this.#authenticateAndSync();\n    \n    this.#isInitialized = true;\n  }\n\n  /**\n   * Gets the current language\n   * @returns {string} Current language code\n   */\n  getLanguage() {\n    return this.#currentLanguage;\n  }\n\n  /**\n   * Sets the current language and updates the UI\n   * @param {string} language - Language code to set\n   */\n  setLanguage(language) {\n    if (this.#availableLanguages.includes(language)) {\n      this.#currentLanguage = language;\n      localStorage.setItem('cmscure_current_language', language);\n      this.dispatchEvent(new CustomEvent('languageChanged', { detail: { language } }));\n      this.dispatchEvent(new CustomEvent('contentUpdated', { detail: { reason: 'LanguageChanged' } }));\n      console.log(`[CMSCureSDK] Language changed to: ${language}`);\n    } else {\n      console.warn(`[CMSCureSDK] Language '${language}' is not available.`);\n    }\n  }\n\n  /**\n   * Gets all available languages\n   * @returns {string[]} Array of available language codes\n   */\n  getAvailableLanguages() {\n    return this.#availableLanguages;\n  }\n\n  /**\n   * Gets a translation for a specific key and tab\n   * @param {string} key - Translation key\n   * @param {string} tab - Tab name (e.g., 'common', 'homepage')\n   * @returns {string} Translated string or key if not found\n   */\n  translation(key, tab) {\n    const value = this.#cache[tab]?.[this.#currentLanguage]?.[key];\n    return value || `[${key}]`;\n  }\n\n  /**\n   * Gets a color value by key\n   * @param {string} key - Color key\n   * @returns {string|null} Color value or null if not found\n   */\n  color(key) {\n    const colorData = this.#cache['__colors__']?.[key];\n    \n    // Handle different color data formats\n    if (typeof colorData === 'string') {\n      return colorData; // Direct color string\n    }\n    if (typeof colorData === 'object' && colorData !== null) {\n      return colorData.hex || colorData.value || colorData.color || null;\n    }\n    \n    return null;\n  }\n\n  /**\n   * Gets an image URL by key\n   * @param {string} key - Image key\n   * @returns {string|null} Image URL or null if not found\n   */\n  image(key) {\n    return this.#cache['__images__']?.[key] || null;\n  }\n\n  /**\n   * Gets data store items by API identifier\n   * @param {string} apiIdentifier - Data store API identifier\n   * @returns {Array} Array of data store items\n   */\n  dataStore(apiIdentifier) {\n    return this.#dataStoreCache[apiIdentifier] || [];\n  }\n\n  /**\n   * Forces a refresh of all content\n   * @returns {Promise<void>}\n   */\n  async refresh() {\n    if (!this.#config) {\n      console.warn('[CMSCureSDK] Cannot refresh: SDK not configured');\n      return;\n    }\n    \n    console.log('[CMSCureSDK] Refreshing content...');\n    await this.#authenticateAndSync();\n    this.dispatchEvent(new CustomEvent('contentUpdated', { detail: { reason: 'Manual refresh' } }));\n  }\n\n  /**\n   * Loads cached state from localStorage\n   * @private\n   */\n  #loadStateFromStorage() {\n    try {\n      // Load cached auth token\n      const token = localStorage.getItem('cmscure_auth_token');\n      const languages = localStorage.getItem('cmscure_available_languages');\n      const currentLang = localStorage.getItem('cmscure_current_language');\n      const cacheData = localStorage.getItem('cmscure_cache');\n      const dataStoreCacheData = localStorage.getItem('cmscure_datastore_cache');\n\n      if (token) this.#authToken = token;\n      if (languages) this.#availableLanguages = JSON.parse(languages);\n      if (currentLang && this.#availableLanguages.includes(currentLang)) {\n        this.#currentLanguage = currentLang;\n      }\n      if (cacheData) this.#cache = JSON.parse(cacheData);\n      if (dataStoreCacheData) this.#dataStoreCache = JSON.parse(dataStoreCacheData);\n\n      console.log(`[CMSCureSDK] Loaded state. Current language: ${this.#currentLanguage}`);\n    } catch (error) {\n      console.warn('[CMSCureSDK] Failed to load cached state:', error.message);\n    }\n  }\n\n  /**\n   * Saves current state to localStorage\n   * @private\n   */\n  #saveStateToStorage() {\n    try {\n      if (this.#authToken) localStorage.setItem('cmscure_auth_token', this.#authToken);\n      localStorage.setItem('cmscure_available_languages', JSON.stringify(this.#availableLanguages));\n      localStorage.setItem('cmscure_current_language', this.#currentLanguage);\n      localStorage.setItem('cmscure_cache', JSON.stringify(this.#cache));\n      localStorage.setItem('cmscure_datastore_cache', JSON.stringify(this.#dataStoreCache));\n    } catch (error) {\n      console.warn('[CMSCureSDK] Failed to save state:', error.message);\n    }\n  }\n\n  /**\n   * Authenticates with the server and syncs all content\n   * @private\n   */\n  async #authenticateAndSync() {\n    if (!this.#config) {\n      console.error('[CMSCureSDK] Configuration not set. Call configure() first.');\n      return;\n    }\n\n    try {\n      console.log('[CMSCureSDK] Authenticating...');\n            \n      const response = await fetch(`${this.#serverUrl}/api/sdk/auth`, {\n        method: 'POST',\n        headers: { 'Content-Type': 'application/json' },\n        body: JSON.stringify({\n          projectId: this.#config.projectId,\n          apiKey: this.#config.apiKey\n        })\n      });\n\n      if (!response.ok) {\n        throw new Error(`Authentication failed: ${response.status}`);\n      }\n\n      const data = await response.json();\n            \n      if (!data.success) {\n        throw new Error('Authentication failed');\n      }\n\n      this.#authToken = data.token;\n      this.#availableLanguages = data.availableLanguages || ['en'];\n\n      // Save to localStorage\n      localStorage.setItem('cmscure_auth_token', this.#authToken);\n      localStorage.setItem('cmscure_available_languages', JSON.stringify(this.#availableLanguages));\n\n      console.log('[CMSCureSDK] Authentication successful. Available languages:', this.#availableLanguages);\n      console.log('[CMSCureSDK] Syncing all content...');\n\n      // Create a list of all sync operations to run in parallel\n      const syncPromises = [\n        ...data.tabs.map(tab => this.#syncTab(tab)),\n        ...data.stores.map(store => this.#syncStore(store)),\n        this.#syncColors(),\n        this.#syncImages()\n      ];\n\n      await Promise.all(syncPromises);\n            \n      console.log('[CMSCureSDK] Initial sync complete.');\n      this.#saveStateToStorage();\n      this.dispatchEvent(new CustomEvent('contentUpdated', { detail: { reason: 'Initial sync' } }));\n            \n    } catch (error) {\n      console.error('[CMSCureSDK] Authentication or sync failed:', error.message);\n      throw error;\n    }\n  }\n\n  /**\n   * Syncs translations for a specific tab\n   * @private\n   */\n  async #syncTab(tab) {\n    try {\n      const response = await fetch(`${this.#serverUrl}/api/sdk/translations/${this.#config.projectId}/${tab}`, {\n        headers: { 'Authorization': `Bearer ${this.#authToken}` }\n      });\n\n      if (response.ok) {\n        const data = await response.json();\n        if (!this.#cache[tab]) this.#cache[tab] = {};\n        \n        // Process the keys array from API response\n        if (data.keys && Array.isArray(data.keys)) {\n          data.keys.forEach(keyObj => {\n            const { key, values } = keyObj;\n            // Restructure: values = {en: \"value\", fr: \"valeur\"} \n            // Into: cache[tab][lang][key] = value\n            Object.keys(values).forEach(lang => {\n              if (!this.#cache[tab][lang]) this.#cache[tab][lang] = {};\n              this.#cache[tab][lang][key] = values[lang];\n            });\n          });\n        }\n        \n        console.log(`[CMSCureSDK] Synced tab: ${tab}`);\n      } else {\n        console.warn(`[CMSCureSDK] Failed to sync tab ${tab}: ${response.status}`);\n      }\n    } catch (error) {\n      console.error(`[CMSCureSDK] Error syncing tab ${tab}:`, error.message);\n    }\n  }\n\n  /**\n   * Syncs images from server\n   * @private\n   */\n  async #syncImages() {\n    try {\n      const response = await fetch(`${this.#serverUrl}/api/sdk/images/${this.#config.projectId}`, {\n        headers: { 'Authorization': `Bearer ${this.#authToken}` }\n      });\n\n      if (response.ok) {\n        const data = await response.json();\n        \n        // Transform array format [{key: \"name\", url: \"...\"}] into object format {name: \"...\"}\n        const imagesObj = {};\n        if (Array.isArray(data)) {\n          data.forEach(imageItem => {\n            if (imageItem.key && imageItem.url) {\n              imagesObj[imageItem.key] = imageItem.url;\n            }\n          });\n        } else {\n          // If it's already an object, use as-is\n          Object.assign(imagesObj, data);\n        }\n        \n        this.#cache['__images__'] = imagesObj;\n        console.log('[CMSCureSDK] Synced images:', imagesObj);\n      } else {\n        console.warn(`[CMSCureSDK] Failed to sync images: ${response.status}`);\n      }\n    } catch (error) {\n      console.error('[CMSCureSDK] Error syncing images:', error.message);\n    }\n  }\n\n  /**\n   * Syncs colors from server\n   * @private\n   */\n  async #syncColors() {\n    try {\n      const response = await fetch(`${this.#serverUrl}/api/sdk/colors/${this.#config.projectId}`, {\n        headers: { 'Authorization': `Bearer ${this.#authToken}` }\n      });\n\n      if (response.ok) {\n        const data = await response.json();\n        \n        // Transform array format [{key: \"name\", value: \"#hex\"}] into object format {name: \"#hex\"}\n        const colorsObj = {};\n        if (Array.isArray(data)) {\n          data.forEach(colorItem => {\n            if (colorItem.key && colorItem.value) {\n              colorsObj[colorItem.key] = colorItem.value;\n            }\n          });\n        } else {\n          // If it's already an object, use as-is\n          Object.assign(colorsObj, data);\n        }\n        \n        this.#cache['__colors__'] = colorsObj;\n        console.log('[CMSCureSDK] Synced colors:', colorsObj);\n      } else {\n        console.warn(`[CMSCureSDK] Failed to sync colors: ${response.status}`);\n      }\n    } catch (error) {\n      console.error('[CMSCureSDK] Error syncing colors:', error.message);\n    }\n  }\n\n  /**\n   * Syncs a data store from server\n   * @private\n   */\n  async #syncStore(apiIdentifier) {\n    try {\n      const response = await fetch(`${this.#serverUrl}/api/sdk/store/${this.#config.projectId}/${apiIdentifier}`, {\n        headers: { 'Authorization': `Bearer ${this.#authToken}` }\n      });\n\n      if (response.ok) {\n        const data = await response.json();\n        this.#dataStoreCache[apiIdentifier] = data;\n        console.log(`[CMSCureSDK] Synced data store: ${apiIdentifier}`);\n      } else {\n        console.warn(`[CMSCureSDK] Failed to sync data store ${apiIdentifier}: ${response.status}`);\n      }\n    } catch (error) {\n      console.error(`[CMSCureSDK] Error syncing data store ${apiIdentifier}:`, error.message);\n    }\n  }\n}\n\n// Make SDK available globally for browser environments\nif (typeof window !== 'undefined') {\n  window.CMSCureSDK = CMSCureSDK;\n}\n\n// For CommonJS environments  \nif (typeof module !== 'undefined' && module.exports) {\n  module.exports = CMSCureSDK;\n}\n\n// For AMD/RequireJS environments\nif (typeof define === 'function' && define.amd) {\n  define([], function() {\n    return CMSCureSDK;\n  });\n}\n\n// Export the class as default for ES modules (if supported)\nif (typeof exports !== 'undefined') {\n  exports.default = CMSCureSDK;\n}\n"],"names":[],"mappings":"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"}